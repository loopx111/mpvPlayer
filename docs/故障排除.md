# æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### 1. UIç•Œé¢ä¸æ˜¾ç¤º

**ç—‡çŠ¶**ï¼š
- MPVè§†é¢‘æ’­æ”¾æ­£å¸¸
- æ§åˆ¶å°ç•Œé¢æ— æ³•æ˜¾ç¤º
- åº”ç”¨åœ¨åå°è¿è¡Œ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. **æ£€æŸ¥æ˜¾ç¤ºç¯å¢ƒ**
   ```bash
   echo $DISPLAY  # åº”è¯¥æ˜¾ç¤º :0 æˆ–ç±»ä¼¼å€¼
   ```

2. **ç¡®ä¿åœ¨å›¾å½¢ç•Œé¢ä¸­è¿è¡Œ**
   - ä¸è¦åœ¨SSHç»ˆç«¯ä¸­ç›´æ¥è¿è¡Œ
   - ä½¿ç”¨æ¡Œé¢ç»ˆç«¯æˆ–ç›´æ¥åŒå‡»è„šæœ¬

3. **ä½¿ç”¨ä¸“ç”¨å¯åŠ¨è„šæœ¬**
   ```bash
   ./start_kylin.sh  # å·²åŒ…å«æ­£ç¡®çš„ç¯å¢ƒå˜é‡è®¾ç½®
   ```

4. **æ‰‹åŠ¨è®¾ç½®ç¯å¢ƒå˜é‡**
   ```bash
   export DISPLAY=:0
   export QT_QPA_PLATFORM=xcb
   python -m src.app -c data/config_kylin.json
   ```

### 2. MPVæ’­æ”¾å™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š
- åº”ç”¨å¯åŠ¨å¤±è´¥
- æŠ¥é”™"mpv not found"

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…MPVæ’­æ”¾å™¨
sudo apt update
sudo apt install mpv

# éªŒè¯å®‰è£…
mpv --version
```

### 3. Pythonä¾èµ–å®‰è£…å¤±è´¥

**ç—‡çŠ¶**ï¼š
- å¯¼å…¥æ¨¡å—å¤±è´¥
- ç¼ºå°‘PySide6ã€paho-mqttç­‰åŒ…

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# ä½¿ç”¨å¢å¼ºç‰ˆå®‰è£…è„šæœ¬
./install_kylin_deps_v2.sh

# æˆ–æ‰‹åŠ¨å®‰è£…
source venv/bin/activate
pip install -r requirements.txt
```

### 4. è™šæ‹Ÿç¯å¢ƒé—®é¢˜

**ç—‡çŠ¶**ï¼š
- "venv/bin/python: not found"
- Pythonå‘½ä»¤æ‰¾ä¸åˆ°

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# é‡æ–°åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 5. æƒé™é—®é¢˜

**ç—‡çŠ¶**ï¼š
- æ— æ³•åˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•
- "Permission denied"é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la /opt/mpvPlayer/

# ä¿®å¤æƒé™
sudo chown -R $USER:$USER /opt/mpvPlayer/
```

## ğŸ“Š è¯Šæ–­å·¥å…·

### æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
```bash
# æ£€æŸ¥Pythonç¯å¢ƒ
python3 --version

# æ£€æŸ¥MPV
mpv --version

# æ£€æŸ¥æ˜¾ç¤ºç¯å¢ƒ
echo $DISPLAY

# æ£€æŸ¥Qtå¹³å°
echo $QT_QPA_PLATFORM
```

### æµ‹è¯•PySide6åŠŸèƒ½
```bash
# ç®€å•æµ‹è¯•è„šæœ¬
python3 -c "import PySide6; print('PySide6å¯¼å…¥æˆåŠŸ')"
python3 -c "from PySide6.QtWidgets import QApplication, QLabel; app = QApplication([]); label = QLabel('æµ‹è¯•'); label.show(); print('Qtçª—å£æµ‹è¯•æˆåŠŸ')"
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f data/logs/mpvPlayer.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
journalctl -f
```

## ğŸ”§ é«˜çº§è°ƒè¯•

### å¯ç”¨è¯¦ç»†æ—¥å¿—
åœ¨é…ç½®æ–‡ä»¶ä¸­å¢åŠ æ—¥å¿—çº§åˆ«ï¼š
```json
{
  "system": {
    "logLevel": "DEBUG"
  }
}
```

### å‘½ä»¤è¡Œè°ƒè¯•
```bash
# å¸¦è°ƒè¯•ä¿¡æ¯å¯åŠ¨
python -m src.app -c data/config_kylin.json --verbose

# åªæ£€æŸ¥é…ç½®
python -m src.app --check-config
```

### ç½‘ç»œè¿æ¥æµ‹è¯•
```bash
# æµ‹è¯•MQTTè¿æ¥
python3 -c "import paho.mqtt.client as mqtt; client = mqtt.Client(); client.connect('127.0.0.1', 1883, 60); print('MQTTè¿æ¥æˆåŠŸ')"
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½æ— æ³•è§£å†³é—®é¢˜ï¼š

1. **æ”¶é›†ä¿¡æ¯**ï¼š
   - æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼š`cat /etc/kylin-release`
   - Pythonç‰ˆæœ¬ï¼š`python3 --version`
   - é”™è¯¯æ—¥å¿—ï¼š`data/logs/mpvPlayer.log`

2. **é‡ç°æ­¥éª¤**ï¼š
   - è¯¦ç»†æè¿°æ“ä½œæ­¥éª¤
   - æä¾›å®Œæ•´çš„é”™è¯¯ä¿¡æ¯

3. **ç¯å¢ƒä¿¡æ¯**ï¼š
   - ç¡¬ä»¶é…ç½®
   - ç½‘ç»œç¯å¢ƒ
   - å…¶ä»–ç›¸å…³è½¯ä»¶